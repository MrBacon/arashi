(function(A){A.widget("ui.notify",{options:{speed:500,expires:5000,stack:"below"},_create:function(){var B=this;this.templates={};this.keys=[];this.element.addClass("ui-notify").children().addClass("ui-notify-message").each(function(D){var C=this.id||D;B.keys.push(C);B.templates[C]=A(this).removeAttr("id").wrap("<div></div>").parent().html()}).end().empty()},create:function(B,D,C){if(typeof B==="object"){C=D;D=B;B=null}return new A.ui.notify.instance(this)._create(D,A.extend({},this.options,C),this.templates[B||this.keys[0]])}});A.extend(A.ui.notify,{instance:function(B){this.parent=B;this.isOpen=false}});A.extend(A.ui.notify.instance.prototype,{_create:function(H,E,G){this.options=E;var D=this,F=G.replace(/#\{(.*?)\}/g,function(I,J){return(J in H)?H[J]:""}),C=(this.element=A(F)),B=C.find("a.ui-notify-close");if(this._trigger("beforeopen")===false){return }if(typeof this.options.click==="function"){C.addClass("ui-notify-click").bind("click",function(I){D._trigger("click",I,D)})}if(B.length&&!!E.expires){B.remove()}else{if(B.length){B.bind("click",function(){D.close();return false})}}this.open();if(typeof E.expires==="number"){window.setTimeout(function(){D.close()},E.expires)}return this},close:function(){var B=this,C=this.options.speed;this.isOpen=false;this.element.fadeTo(C,0).slideUp(C,function(){B._trigger("close")});return this},open:function(){if(this.isOpen){return this}var B=this;this.isOpen=true;this.element[this.options.stack==="above"?"prependTo":"appendTo"](this.parent.element).css({display:"none",opacity:""}).fadeIn(this.options.speed,function(){B._trigger("open")});return this},widget:function(){return this.element},_trigger:function(C,D,B){return this.parent._trigger.call(this,C,D,B)}})})(jQuery);