$(function(){$("#start-upload-button").click(function(){StartUpload()});$("#close-upload-container").click(function(){$("#upload-container").fadeOut(function(){ClearList();if(document.getElementById("slmfu").Content.Files.TotalUploadedFiles>0){location.reload(true)}})});$("a.delete-media").click(function(){if(confirm("Are you sure to permanently delete this media file ?")){var A=$(this);$.post(urlDeleteMedia,{name:$("input.media-name",A.parent()).val()},function(B){if(B.indexOf("<!--msg-alert")>-1){showMessage(B)}else{A.parents("tr").eq(0).remove();showMessage(B)}})}})});var slCtl=null;function onSilverlightError(C,A){var B="";if(C!=null&&C!=0){B=C.getHost().Source}var F=A.ErrorType;var D=A.ErrorCode;if(F=="ImageError"||F=="MediaError"){return }var E="Unhandled Error in Silverlight Application "+B+"\n";E+="Code: "+D+"    \n";E+="Category: "+F+"       \n";E+="Message: "+A.ErrorMessage+"     \n";if(F=="ParserError"){E+="File: "+A.xamlFile+"     \n";E+="Line: "+A.lineNumber+"     \n";E+="Position: "+A.charPosition+"     \n"}else{if(F=="RuntimeError"){if(A.lineNumber!=0){E+="Line: "+A.lineNumber+"     \n";E+="Position: "+A.charPosition+"     \n"}E+="MethodName: "+A.methodName+"     \n"}}throw new Error(E)}function pluginLoaded(A){slCtl=document.getElementById("slmfu");slCtl.Content.Files.AllFilesFinished=AllFilesFinished;slCtl.Content.Files.SingleFileUploadFinished=SingleFileFinished;slCtl.Content.Files.ErrorOccurred=ShowErrorDiv;slCtl.Content.Control.MaximumFileSizeReached=ShowMaximumFileSizeDiv;slCtl.Content.Files.FileAdded=UpdateFileList;slCtl.Content.Files.FileRemoved=UpdateFileList;slCtl.Content.Files.StateChanged=UpdateFileList;slCtl.Content.Files.TotalPercentageChanged=UpdateTotalPercentage}function ShowNumberOfFilesUploaded(){if(slCtl!=null){alert("Total Files Uploaded: "+slCtl.Content.Files.TotalUploadedFiles)}}function ShowTotalNumberOfFilesSelected(){if(slCtl!=null){alert("Total Files Selected: "+slCtl.Content.Files.TotalFilesSelected)}}function ShowUploadProgress(){if(slCtl!=null){alert("Progress: "+slCtl.Content.Files.Percentage)}}function AllFilesFinished(){$("#AllFinishedDiv").show()}function SingleFileFinished(){$("#SingleFileFinishedDiv").show()}function ShowErrorDiv(){$("#ErrorDiv").show()}function ShowMaximumFileSizeDiv(){document.getElementById("MaximumFileSizeDiv").style.display="block"}function UpdateFileList(){var B="<table class='grid ui-state-default'><thead><tr><td class='align-center'>Name</td><td class='align-center'>Status</td><td></td></tr></thead><tbody class='ui-widget-content'>";var C;var A=0;for(A=0;A<slCtl.Content.Files.FileList.length;A++){C=slCtl.Content.Files.FileList[A];B+="<tr><td>"+C.FileName+"</td><td>"+C.StateString+"</td><td></td></tr>"}B+="</tbody></table>";$("#upload-filelist").html(B);UpdateTotalSelected();UpdateTotalUploaded();$("#upload-container").position({my:"center",at:"center",of:window});$("#upload-container").show()}function UpdateTotalSelected(){$("#TotalSelected").html(slCtl.Content.Files.TotalFilesSelected+" files selected")}function UpdateTotalPercentage(){$("#TotalPercentage").html(slCtl.Content.Files.Percentage*100+"% uploaded")}function UpdateTotalUploaded(){$("#TotalUploaded").html(slCtl.Content.Files.TotalUploadedFiles+" files uploaded")}function StartUpload(){if(slCtl!=null){slCtl.Content.Control.StartUpload()}}function ClearList(){if(slCtl!=null){slCtl.Content.Control.ClearList()}};