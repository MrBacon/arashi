$(document).ready(function () {
   // Get latest 6 tweets by jQueryHowto
   $.jTwitter('arashiproject', 4, function (data) {
      $('#twitter-roll').empty();
      $.each(data, function (i, post) {
         // See output-demo.js file for details
         $('#twitter-roll').append('<li class="twitter-post">' +
                                    '<div class="txt">' + post.text + ' </div>' +
                                    '<div class="date">' + relative_time(post.created_at) + '</div>' +
                                    '</li>');
      });
   });
});   



/*
 * jTwitter 1.1.1 - Twitter API abstraction plugin for jQuery
 * Copyright (c) 2009 jQuery Howto
 * Licensed under the GPL license:
 *   http://www.gnu.org/licenses/gpl.html
 * Plugin + Author URL:
 *   http://jquery-howto.blogspot.com
 */
(function (b) { b.extend({ jTwitter: function (d, a, c) { if (!(d == "undefined" || a == "undefined")) { if (b.isFunction(a)) { c = a; a = 5 } b.getJSON("http://twitter.com/status/user_timeline/" + d + ".json?count=" + a + "&callback=?", function (e) { b.isFunction(c) && c.call(this, e) }) } } }) })(jQuery);

function relative_time(time_value) {
   var values = time_value.split(" ");
   time_value = values[1] + " " + values[2] + ", " + values[5] + " " + values[3];
   var parsed_date = Date.parse(time_value);
   var relative_to = (arguments.length > 1) ? arguments[1] : new Date();
   var delta = parseInt((relative_to.getTime() - parsed_date) / 1000);
   delta = delta + (relative_to.getTimezoneOffset() * 60);

   if (delta < 60) {
      return 'less than a minute ago';
   } else if (delta < 120) {
      return 'about a minute ago';
   } else if (delta < (60 * 60)) {
      return (parseInt(delta / 60)).toString() + ' minutes ago';
   } else if (delta < (120 * 60)) {
      return 'about an hour ago';
   } else if (delta < (24 * 60 * 60)) {
      return 'about ' + (parseInt(delta / 3600)).toString() + ' hours ago';
   } else if (delta < (48 * 60 * 60)) {
      return '1 day ago';
   } else {
      return (parseInt(delta / 86400)).toString() + ' days ago';
   }
}